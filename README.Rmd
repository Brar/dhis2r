---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->


```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  cache = T,
  fig.path = "man/figures/README-",
  out.width = "100%"
)
#*100 4.1em helvetica neue,open sans,sans-serif;*
```

# dhis2r <img src="man/figures/logo.png" align="right" height="139" />

<!-- badges: start -->
[![Codecov test coverage](https://codecov.io/gh/amanyiraho/dhis2r/branch/master/graph/badge.svg)](https://app.codecov.io/gh/amanyiraho/dhis2r?branch=master)
[![Lifecycle: stable](https://img.shields.io/badge/lifecycle-stable-brightgreen.svg)](https://lifecycle.r-lib.org/articles/stages.html#stable)
[![R-CMD-check](https://github.com/amanyiraho/dhis2r/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/amanyiraho/dhis2r/actions/workflows/R-CMD-check.yaml)
<!-- badges: end -->

## Overview

**dhis2r** is an R client for the DHIS2 web API.

Pull data from a DHIS2 instance into R without the hassle of logging into the DHIS2 user interface periodically (every day, week, month, quarter, or year) to download the same data or make the same routine data analysis steps based on fixed or relative periods

***In short, dhis2r will save you time in the future***, especially if you do routine reporting like immunisation programs.

### Motivation for this package

[DHIS2](https://dhis2.org/) is an open-source, web-based Health Management Information System (HMIS), and currently being adopted in the education sector as the Education Management Information System (EMIS) in several countries.

More than 73 countries worldwide use DHIS2 for collecting and analyzing health data. 2.4 billion people (30% of the worldâ€™s population) live in countries where DHIS2 is used. (source: https://dhis2.org/)

With the increasing number of data managers/analysts downloading data from dhis2 instances to make **routine period** reports, data visualisation and dashboards, this R package can make it much easier to pull the required data in one click and much faster.

There are over 2 million users of R, and some of them periodically analyse data from DHIS2, like me; and support health programs which affect over the 2.4 billion people.

#### Some of the scenarios this R package can change for data managers :

- During routine periodic (monthly, quarterly, yearly) reporting, you login into a DHIS2 instance, make several clicks to choose the period, organisation unit and indicator and then download data. If you have made an error yet closed the browser tab, you have to do the same task repeatedly. On top of that, you must also go through the same hassle the next month, quarter and year.

- Sometimes you have several data requests, yet only one variable changes and you have to respond to them with limited time.

- Sometimes, you need to change browsers or call a colleague to download data on your behalf.

- Most reports after an immunisation campaign are similar, i.e. with identical data visualisations and conclusions on whether the campaign was successful. The only thing that changes is the data.

*Why do you have to carry out the same data download and data analysis steps, periodically?*

#### How this package solves most of the above issues.

- **dhis2r** package can automate most of the steps to download data from a DHIS2 instance, and you can get the data with just one click since all the steps are written in terms of code.

- **dhis2r** opens up opportunities to automate data requests, periodic reports and dashboards with other technologies.

- If a data manager has made an error by choosing the wrong period, they need to change one character string and rerun the report.


## Installation

You can install the development version of dhis2r from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("amanyiraho/dhis2r")
```


## Examples on how to use this package 

This is a basic example which shows you how to a get data from a Dhis2 instance.

#### Connect to DHIS2 instance

Using your password and username login in the DHIS instance

```{r}
library(dhis2r)
dhis2_play_connection <- Dhis2r$new(base_url = "https://play.dhis2.org/", 
                                    username = "admin", 
                                    password = "district",
                                    api_version = "2.39.0.1",
                                    api_version_position = "before")
```

### Getting metadata

Get metadata using the above created connect

You can start with with metadata availabe on that DHIS2 instance 

```{r}
dhis2_play_connection$get_metadata(endpoint = "dataElements")
```


You also get metadata about organisation Units

```{r example}

dhis2_play_connection$get_metadata(endpoint = "organisationUnits",fields =  c("name","id", "level"))

```

### Getting analytics data 

Analytics data can include data from indicators, dataElements, program indicators, etc which returns the reported values.


```{r}
dhis2_play_connection$get_analytics(analytic = "FTRrcoaog83", #Accute Flaccid Paralysis (Deaths < 5 yrs),
                                    org_unit = "ImspTQPwCqd", #Sierra Leone (National level)
                                    period = "LAST_12_MONTHS",
                                    output_scheme = "NAME"
                                                 )

```

###### You can do way more with dhis2r, refer to the acticles where I will be posting demos and different use cases. 

Please note that the dhis2r project is released with a [Contributor Code of Conduct](https://contributor-covenant.org/version/2/0/CODE_OF_CONDUCT.html). By contributing to this project, you agree to abide by its terms.
